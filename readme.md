JPSC Data Set
====
JPSCデータの作成プログラムパッケージ


## Description
- リリースデータの作成
	- 新規データを固定長データから作成
	- 継続データにエディティングの修正を加える
- データ整合性のチェック
- 新変数の作成（未実装）

## Requirement
- Python 3.10 or higher


- データ関連
	- 新規データ（固定長txt）直近2年分
	- エディティング修正リスト
	 
## Usage
- データの作成
	- ローデータ（新規データ）の準備
		- 固定長データ
			- 中央調査社から納品された最新データを`jpsc_dataset/data/fixed_width_data/p*_release`
			の配下のフォルダーに配置
		- テープフォーマット
			- アドレス情報と変数名が入った対応するテープフォーマット（xlsx形式）を`data/fixed_width_data/tape_formats`に配置
			- ファイル名は `formatnp[調査回].xlsx` とする
	- 継続データについて
		- 特に必要無し。自動的に昨年度リリースデータをdata/old_data/p(*-1)_release 以下に作成(未実装)
	- その他の設定
		- ルートディレクトリ下にある`config.toml`　リリースする年度を指定
		- ディレクトリ構成の変更や、新規コーホートの追加があったときはconfig.pyに書き込むこと


- データの作成
	- ``config.toml``にリリースする調査回(`latest_wave` or `latest_wave_user` )を記述．もとになる
	-  main.pyを実行
	- `products/p*_relesae` 以下に当該年度のリリースCSVファイル一式が作成される（未実装）
	- `data/update_data`以下に作成されている当該年度CSVファイル一式を使用


- データ整合性のチェック
	- nosetests の実行
		- 継続データについて、今年度リリスデータと前年度との差分が、エディティング修正指示と一致
		しているかをチェック
		- 同一IDについて、年齢が1歳刻みで入っているかのチェック
		- 新規データのチェックは未実装
       - 年齢に不整合があった場合
                - longitudinal.py をrootディレクトリから実行
                - 不整合のIDは tests/inconsistents 下のCSVファイルに保存



##TODO
- [ ] ログファイル作成の自動化


- [ ] データ作成
    - [] リリースデータセットの作成（）

    - [] ユーザーデータの作成
        - [] 直近1年データの除外
        - [] 居住地情報（含む引っ越し履歴）の削除、都道府県データの別途保存
    
- [ ] テスト関連
    - [] 新規データのチェック
        - [] 初回納品と最終納品の差分
        - []　変数の内容（特に合成変数）の妥当性

- [ ] 新変数の作成
	
- [x] DONE


## Contribution


## Author
